# æ¸¬è©¦ç›®éŒ„èªªæ˜

æ­¤ç›®éŒ„åŒ…å«æ‰€æœ‰çš„æ¸¬è©¦æª”æ¡ˆå’Œæ¸¬è©¦å·¥å…·ã€‚

## ğŸ“ ç›®éŒ„çµæ§‹

```makefile
tests/
â”œâ”€â”€ unit/              # å–®å…ƒæ¸¬è©¦
â”‚   â”œâ”€â”€ dateUtils.test.js
â”‚   â”œâ”€â”€ borrowService.test.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ integration/       # æ•´åˆæ¸¬è©¦
â”‚   â””â”€â”€ borrowFlow.test.js
â”œâ”€â”€ mocks/            # Mock å·¥å…·å’Œå‡è³‡æ–™
â”‚   â”œâ”€â”€ mockSheets.js
â”‚   â”œâ”€â”€ mockLineAPI.js
â”‚   â””â”€â”€ fixtures.js
â”œâ”€â”€ setup.js          # Jest æ¸¬è©¦ç’°å¢ƒè¨­å®š
â””â”€â”€ README.md         # æœ¬æª”æ¡ˆ
```

## ğŸ§ª æ¸¬è©¦é¡å‹èªªæ˜

### å–®å…ƒæ¸¬è©¦ (Unit Tests)

- **ç›®çš„**ï¼šæ¸¬è©¦å–®ä¸€å‡½å¼æˆ–æ¨¡çµ„çš„åŠŸèƒ½
- **ç‰¹é»**ï¼šå¿«é€Ÿã€ç¨ç«‹ã€ä¸ä¾è³´å¤–éƒ¨æœå‹™
- **ç¯„ä¾‹**ï¼šæ¸¬è©¦ `parseDotDate_` å‡½å¼æ˜¯å¦æ­£ç¢ºè§£ææ—¥æœŸ

### æ•´åˆæ¸¬è©¦ (Integration Tests)

- **ç›®çš„**ï¼šæ¸¬è©¦å¤šå€‹æ¨¡çµ„å”ä½œçš„æµç¨‹
- **ç‰¹é»**ï¼šè¼ƒæ…¢ã€å¯èƒ½éœ€è¦ mock å¤–éƒ¨æœå‹™
- **ç¯„ä¾‹**ï¼šæ¸¬è©¦å®Œæ•´çš„å€Ÿç”¨å™¨ææµç¨‹

## ğŸ› ï¸ Mock å·¥å…·èªªæ˜

### mockSheets.js

æ¨¡æ“¬ Google Apps Script çš„ SpreadsheetApp API

### mockLineAPI.js

æ¨¡æ“¬ LINE Messaging API çš„å›æ‡‰

### fixtures.js

æä¾›æ¸¬è©¦ç”¨çš„å‡è³‡æ–™ï¼ˆä½¿ç”¨è€…ã€ç§Ÿå€Ÿè¨˜éŒ„ç­‰ï¼‰

## ğŸ“ å‘½åè¦ç¯„

- æ¸¬è©¦æª”æ¡ˆï¼š`*.test.js` æˆ– `*.spec.js`
- Mock æª”æ¡ˆï¼š`mock*.js`
- æ¸¬è©¦æè¿°ï¼šä½¿ç”¨ç¹é«”ä¸­æ–‡ï¼Œæ¸…æ¥šèªªæ˜æ¸¬è©¦ç›®çš„

## ğŸš€ åŸ·è¡Œæ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
pnpm test

# åŸ·è¡Œå–®å…ƒæ¸¬è©¦
pnpm test:unit

# åŸ·è¡Œæ•´åˆæ¸¬è©¦
pnpm test:integration

# ç›£çœ‹æ¨¡å¼ï¼ˆè‡ªå‹•é‡æ–°åŸ·è¡Œï¼‰
pnpm test:watch

# ç”¢ç”Ÿè¦†è“‹ç‡å ±å‘Š
pnpm test:coverage
```
